
image: php:5.6

before_script:
- apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y locales
- sed -i -e 's/# fr_FR.UTF-8 UTF-8/fr_FR.UTF-8 UTF-8/' /etc/locale.gen
- echo 'LANG="fr_FR.UTF-8"'>/etc/default/locale
- dpkg-reconfigure --frontend=noninteractive locales
- update-locale LANG=fr_FR.UTF-8
- docker-php-ext-install pdo pdo_mysql bcmath

- cp ci-resources/LocalSettings.php .

services:
- mysql

variables:
    MYSQL_DATABASE: pastell_test
    MYSQL_USER: user
    MYSQL_PASSWORD: user
    MYSQL_RANDOM_ROOT_PASSWORD: "yes"

test:
    script:
        - ext/composer/vendor/phpunit/phpunit/phpunit -c test/PHPUnit/phpunit.xml


