nom: Actes RH

type: Flux RH

formulaire:
	Informations générales:
		Siren de la collectivité: {read-only: true, data: siren}
		Objet: {requis: true, title: true}
		
	Agent:
		agent: {name: "Choisir les valeurs dans une liste" , type: externalData, script: agent-collectivite.php, script-controler: agent-collectivite-controler.php, link_name: liste des agents}
		Matricule de l'agent: 
		Nom patronymique: {requis: true}
		Nom d'usage: 
		Prénom : {requis: true}
		Grade:
		Statut:
			type: select
			value: 
				titulaire
				stagiaire
				non-titulaire
		
	Actes:
		classification:  
			name:Classification en matière et sous-matière
			type: externalData
			script: choix-classification.php
			script-controler: choix-classification-controler.php
			link_name: liste des matières et sous-matières
			
		acte_nature:
			name: Nature de l'acte
			type: select
			requis: true
			value: 
				3: Arrêtés Individuels
				2: Arrêtés réglementaires
				6: Autres
				4: Contrats et conventions
				1: Délibérations
				5: Documents budgétaires et financiers
				
		Type:
			type: select
			value:	
					arrete_nomination: Arretés de nomination des titulaires et non titulaires
					arrete_avancement: Arretés d'avancement de grade
					sanction: Decisions portant des sanctions disciplinaires
					licenciement: Licenciement
	
		Numéro de l'acte:  {requis: true}
		Date de l'acte: {type: date, requis: true}
		Envoi au contrôle de légalité: {type: checkbox}
		Arreté: {type: file, requis: true}
		Autre document attaché: {type: file, multiple: true}
	
action:
	creation:
		
		name: Créer
		
		rule:
			no-last-action:
			droit_id_u: 'rh-actes:edition'
			type_id_e: 
				service
				collectivite
		
	modification:
	
		name: Modifier
		
		rule:
			last-action: 
				creation
				modification
			role_id_e: editeur
			droit_id_u: 'rh-actes:edition'

	send-tdt:
		
		name: Envoyer au contrôle de légalité
		
		rule:
			last-action: 
				creation
				modification
			role_id_e: editeur
			droit_id_u: 'rh-actes:edition'
			document_is_valide: true
			content: 
				Envoi au contrôle de légalité: true
	
		action-class: TedetisEnvoie
		auto-class: TedetisRecup
		
	acquiter-tdt:
		name: Acquittement du contrôle de légalité reçu.
		
		rule:
			role_id_e: no-role

	
	send-cdg-manuel:
		name: Envoyer au CDG
	
		rule:
			last-action: 
				modification
				creation
			
			document_is_valide: true
			content: 
				Envoi au contrôle de légalité: false
			role_id_e: editeur
			droit_id_u: 'rh-actes:edition'
		action-class: EnvoieCDG
			
	send-cdg:
	
		name: Envoyer au CDG
	
		rule:
			last-action: acquiter-tdt
			role_id_e: no-role
					
					
	recu-cdg:
		name: Reçu par le CDG
		rule:
			role_id_e: no-role
		
	tdt-error:
		name: Erreur sur le Tedetis
		rule:
			role_id_e: no-role					
					
	send-ged:
		
		name: Enregistrer dans la GED
	
		rule:
			last-action: 
				recu-cdg
				send-archive 
				
			no-action:
				send-ged
				
			type_id_e: centre_de_gestion
			role_id_e: lecteur
			droit_id_u: 'rh-actes:edition'
			properties: 
				has_ged: manuel
		action-class: Defaut
	
	send-archive:
	
		name: Archiver
	
		rule:
			last-action: 
				recu-cdg
				send-ged
			no-action:
				send-archive	
			type_id_e: centre_de_gestion
			role_id_e: lecteur
			droit_id_u: 'rh-actes:edition'
			properties: 
				has_archivage: manuel
		action-class: Defaut
			
	 
	 	