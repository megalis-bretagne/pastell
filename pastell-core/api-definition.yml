parameters: 
	id_e: 
		required: true
		comment: Identifiant de l'entité (retourné par list-entite)
	type: 
		required: true
		comment: Type de document (retourné par document-type.php)
	id_d: 
		required: true
		comment: Identifiant unique du document  (retourné par list-document)
	offset: 
		required: false
		default: 0
		comment: numéro de la première ligne à retourner
	limit: 
		required: false
		default: 100
		comment: Nombre maximum de lignes à retourner

function:

	list-entite: 
		description: Listes des entités 
		soap: true
		comment: Liste l'ensemble des entités sur lesquelles l'utilisateur a des droits. Liste également les entités filles.	
		output:
			id_e: 
				comment: Identifiant numérique de l'entité
			denomination: 
				comment: "Libellé de l'entité (ex : Saint-Amand-les-Eaux)"
			siren:
				comment: "Numéro SIREN de l'entité (si c'est une collectivité ou un centre de gestion)"
			centre_de_gestion: 
				comment: "Identifiant numérique (id_e) du CDG de la collectivité"
			entite_mere : 
				comment: "Identifiant numérique (id_e) de l'entité mère de l'entité (par exemple pour un service)" 
		
			
	list-document: 
		description: Listes de documents d'une collectivité
		soap: true
		input: 
			id_e:
				comment: Identifiant de l'entité (retourné par list-entite)
				required: true
			type: 
				required: true
				comment: Type de document (retourné par document-type.php)
			offset: 
			limit:
		output:
			id_e: 
				comment: Identifiant numérique de l'entité
			id_d:
				comment: Identifiant unique du document
			role: 
				comment: "Rôle de l'entité sur le document (exemple : éditeur)"
			last-action: 
				comment: "Dernière action effectuée sur le document"
			last_action_date: 
				comment: "Date de la dernière action"
			type:
				comment: "Type de document (identique à l'entrée)"
			creation:
				comment: "Date de création du document"
			modification:
				comment: "Date de dernière modification du document"
			entite:
				is_multiple: true
				comment: "Liste des identifiant (id_e) des autres entités qui ont des droits sur ce document."
			

	recherche-document:
		description: Recherche multi-critère dans la liste des documents
		soap: false
		input: 
			id_e:
				comment: Identifiant de l'entité (retourné par list-entite)
				required: true
			type: 
				required: false
				comment: Type de document (retourné par document-type.php)
			offset: 
			limit:
			lastetat:
				required: false
				comment: Dernier état du document
			last_state_begin: 
				required: false
				comment: date du passage au dernier état du document le plus ancien(date iso)
			last_state_end:
				required: false
				comment: date du passage au dernier état du document le plus récent(date iso)
			etatTransit:
				required: false
				comment: le document doit être passé dans cet état
			state_begin:
				required: false
				comment: date d'entrée la plus ancienne de l'état etatTransit 
			state_end:
				required: false
				comment: date d'entrée la plus récente de l'état etatTransit 
			tri:
				required: false
				comment: critère de tri parmi last_action_date, title et entite
			search:
				required: false
				comment: l'objet du document doit contenir la chaine indiquée
			
			
		output:
			id_e: 
				comment: Identifiant numérique de l'entité
			id_d:
				comment: Identifiant unique du document
			role: 
				comment: "Rôle de l'entité sur le document (exemple : éditeur)"
			last-action: 
				comment: "Dernière action effectuée sur le document"
			last_action_date: 
				comment: "Date de la dernière action"
			type:
				comment: "Type de document (identique à l'entrée)"
			creation:
				comment: "Date de création du document"
			modification:
				comment: "Date de dernière modification du document"
			entite:
				is_multiple: true
				comment: "Liste des identifiant (id_e) des autres entités qui ont des droits sur ce document."

	detail-document: 
		description: Détail sur un document
		comment: Récupère l'ensemble des informations sur un document Liste également les entités filles.
		soap: true
		input: 
			id_e: 
			id_d: 
		output:
			info:
				comment: Reprend les informations disponible sur list-document.php
			data:
				comment: "Données issue du formulaire (voir document-type-info.php pour savoir ce qu'il est possible de récupérer)"
			action_possible:
				is_multiple: true
				comment: "Liste des actions possible (exemple : modification, envoie-tdt, ...)"
			action-possible:
				is_multiple: true
				comment: "Contient la même chose que action_possible, cette sortie est déprécié et sera supprimé dans une prochaine version de Pastell"
			
	detail-several-document: 
		description: Détail sur plusieurs documents
		comment: Récupère l'ensemble des informations sur plusieurs documents
		input: 
			id_e: 
			id_d[]: 
				required: true
				default: 
				comment: Tableau d'identifiants uniques de documents  (retourné par list-document.php)
		output:
			info:
				comment: Reprend les informations disponible sur list-document.php
			data:
				comment: "Données issue du formulaire (voir document-type-info.php pour savoir ce qu'il est possible de récupérer)"
			action_possible:
				is_multiple: true
				comment: "Liste des actions possible (exemple : modification, envoie-tdt, ...)"
			action-possible:
				is_multiple: true
				comment: "Contient la même chose que action_possible, cette sortie est dépréciée et sera supprimée dans une prochaine version de Pastell"
			
				
	create-document: 
		description: Création d'un document
		comment: "Crée un nouveau document"
		soap: true
		input: 
			id_e:
			type: 
		output:
			id_d:
				comment: "Identifiant unique du document crée."
				

	external-data: 
		description: Récupération des choix possibles pour un champs spécial du document
		comment: "Récupère les valeurs possible d'un champs. En effet,  certaine valeur sont « externe » a Pastell : classification Actes, classification CDG, etc.. Ce script permet de récupérer l'ensemble de ces valeurs. Ce script est utilisable sur tous les champs qui dispose d'une propriétés « controler »"
		soap: true
		input: 
			id_e: 
			id_d: 
			field: 
				required: true
				default: 
				comment: le nom d'un champ du document
		output:
			valeur_possible:
				is_multiple: true
				is_variable: true
				comment: "Information supplémentaire sur la valeur possible (éventuellement sous forme de tableau associatif)"
				
				
	modif-document: 
		description: Modification d'un document
		soap: true
		input: 
			data:
				comment: contient les clés id_e et id_d pour identifier le document à modifier, puis, toutes les clés correspondantes au clé du type de document. Permet également l'enregistrement des fichiers (pas en SOAP). data n'est pas le nom de la clé en mode REST, il faut utilisé id_e, id_d, ...
				required: false
					  
		output:
			result:
				comment: " ok - si l'enregistrement s'est bien déroulé"
			formulaire_ok:  
				comment: "1 si le formulaire est valide, 0 sinon"
			message: 
				comment: "Message complémentaire"
	
	send-file: 
		description: Envoie d'un fichier pour modifier un document
		soap: true
		input:
			id_e: 
			id_d: 
			field_name:
				comment: le nom du champs
				required: false
			file_name:
				comment: le nom du fichier
				required: false
			file_number: 
				comment: le numéro du fichier (pour les fichier multiple)
				required: false
			file_content:
				comment: le contenu du fichier
				required: false
					  
		output:
			result:
				comment: " ok - si l'enregistrement s'est bien déroulé"
			formulaire_ok:  
				comment: "1 si le formulaire est valide, 0 sinon"
			message: 
				comment: "Message complémentaire"
	
	receive-file:
		description: Réception d'un fichier (utile pour le mode SOAP)
		soap: true
		input:
			id_e: 
			id_d: 
			field_name:
				comment: le nom du champs
				required: false
			file_number: 
				comment: le numéro du fichier (pour les fichier multiple)
				required: false
		output:
			file_name:
				comment: le nom du fichier
			file_content:
				comment: le contenu du fichier
		 
	
	action: 
		description: Execute une action sur un document
		soap: true
		input: 
			id_e: 
			id_d: 
			action: 
				required: true
				comment: Nom de l'action  (retourné par detail-document, champs action-possible)
			destinataire: 
				required: false
				default: 
				comment: tableau contenant l'identifiant des destinataires pour les actions qui le requièrent
		output:
			result: 
				comment: "1 si l'action a été correctement exécute. Sinon, une erreur est envoyé"
			message:
				comment: "Message complémentaire en cas de réussite"
				
	recuperation-fichier: 
		description: Récupère le contenu d'un fichier
		input: 
			id_e: 
			id_d: 
			field: 
				required: true
				default: 
				comment: le nom d'un champ du document
			num: 
				required: false
				default: 0
				comment: le numéro du fichier, s'il s'agit d'un champ fichier multiple
		output:
			fichier:
				comment: c'est le fichier qui est renvoyé directement



	journal: 
		description: Récupérer le journal
		soap: true
		input: 
			id_e: 
				required: false
				default: 
				comment: Identifiant de l'entité (retourné par list-entite.php)
			recherche: 
				required: false
				default: 
				comment: Champs de recherche sur le contenu du message horodaté
			id_user: 
				required: false
				default: 
				comment: Identifiant de l'utilisateur
			date_debut: 
				required: false
				default: 
				comment: Date à partir de laquelle les informations sont récupérées.
			date_fin: 
				required: false
				default: 
				comment: Date au delà de laquelle les informations ne sont plus récupérées.
			id_d: 
				required: false
				default: 
				comment: Identifiant unique du document  (retourné par list-document.php)
			type: 
				required: false
				default: 
				comment: Type de document (retourné par document-type.php)
			format: 
				required: false
				default: json
				comment: 'Format du journal : json ou bien csv'
			offset: 
			limit: 
		output:
			id_j:
				comment: "Numéro unique, auto-incrémentiel et sans trou du journal"
			type: 
				comment: >
							1. Action sur un document
							2 : Notification
							3 : Modification d'une entité
							4 : Modification d'un utilisateur
							5 : Mail sécurisé
							6 : Connexion
							7 : Consultation d'un document"
			id_e:
				comment: "Identifiant de l'entité"
			id_u:
				comment: "Identifiant de l'utilisateur"
			id_d:
				comment: "Identifiant du document"
			action:
				comment: "Action effectuée"
			message:
				comment: "Message"
			date:
				comment: "Date de l'ajout dans le journal (peut-être différents de l'horodatage)"
			preuve:
				comment: "Contenu de la preuve. Peut être utilisé dans une application qui sait analyser les jetons d'horodatage."
			date_horodatage:
				comment: "Date récupéré dans le jeton d'horodatage."
			message_horodate:
				comment: "Message qui a été horodaté"
			titre:
				comment: "Titre du document"
			document_type: 
				comment: "Type du document"
			denomination:
				comment: "Nom de l'entité"
			nom:
				comment: "Nom de l'utilisateur"
			prenom:
				comment: "Prénom de l'utilisateur"


	list-roles: 
		description: Listes des rôles
		soap: true
		comment: "Liste l'ensemble des rôles disponible sur Pastell."
		output:
			role: 
				comment: "Identifiant du rôle"
			libelle: 
				comment: "Libellé du rôle"

	delete-utilisateur: 
		description: Supprimer un utilisateur
		soap: true
		comment: "Permet la suppression d'un utilisateur soit par son identifiant, soit par son login. Dans le cas où ces deux paramètres sont renseignés, seul l'identifiant sera pris en compte."
		input: 
			id_u:
                                required: false
				comment: Identifiant de l'utilisateur
			login:
                                required: false
				comment: Login de l'utilisateur
		output:
			result: 
				comment: ok - si la suppression s'est bien déroulée


	modif-utilisateur: 
		description: Modifier un utilisateur
		soap: true
		comment: |
                Permet la modification d'un utilisateur soit par son identifiant, soit par son login. 
                Dans le cas où ces deux paramètres sont renseignés, seul l'identifiant sera pris en compte.
		input: 
			id_u:
                                required: false
				comment: Identifiant de l'utilisateur
			login:
                                required: false
				comment: Login de l'utilisateur
			email:
                                required: false
				comment: Email de l'utilisateur
			password:
                                required: false
				comment: Mot de passe de l'utilisateur
			prenom:
                                required: false
				comment: Prénom de l'utilisateur
			nom:
                                required: false
				comment: Nom de l'utilisateur
			create:
                                required: false
                                default: "FALSE"
				comment: Flag permettant la création de l'utilisateur si aucun autre utilisateur ne porte le même nom
		output:
			result: 
				comment: ok - si la modification s'est bien déroulée 


	create-utilisateur: 
		description: Créer un utilisateur
		soap: true
		comment: "Permet la création d'un utilisateur."
		input: 
			login:
                                required: true
				comment: Login de l'utilisateur
			email:
                                required: true
				comment: Email de l'utilisateur
			password:
                                required: true
				comment: Mot de passe de l'utilisateur
			prenom:
                                required: true
				comment: Prénom de l'utilisateur
			nom:
                                required: true
				comment: Nom de l'utilisateur
			id_e:
                                required: false
                                default: 0
				comment: Identifiant de la collectivité de base de l'utilisateur
		output:
			id_u: 
				comment: L'identifiant de l'utilisateur créé


	delete-role-utilisateur: 
		description: Supprimer un role
		soap: true
		comment: "Permet la suppression d'un role d'un utilisateur pour une collectivité donnée."
		input: 
			id_u:
                                required: true
				comment: Identifiant de l'utilisateur
			role:
                                required: true
				comment: Role à supprimer. Pour supprimer l'ensemble des roles de l'utilisateur pour cette collectivité, utiliser "ALL_ROLES"
			id_e:
                                required: true
				comment: Identifiant de la collectivité ciblée
		output:
			result: 
				comment: ok - si la suppresion s'est bien déroulée 


	delete-several-roles-utilisateur: 
		description: Supprimer plusieurs roles
		soap: true
		comment: |
                Permet la suppression d'un ou plusieurs roles d'un utilisateur pour une collectivité donnée.
                L'utilisateur peut être choisi par son identifiant ou son login. Si les deux paramètres sont renseignés, son identifiant sera utilisé.
                La collectivité peut être choisie par son identifiant ou sa dénomination. Si les deux paramètres sont renseignés, son identifiant sera utilisé.
                Dans le cas où la dénomination est choisie, si deux entités portent le même nom, aucune action ne sera effectuée.
		input: 
			id_u:
                                required: false
				comment: Identifiant de l'utilisateur
			login:
                                required: false
				comment: Login de l'utilisateur
			role[]:
                                required: true
				comment: Tableau de roles à supprimer. Possibilité de n'envoyer qu'un simple role également.
			id_e:
                                required: false
				comment: Identifiant de la collectivité ciblée
			denomination:
                                required: false
				comment: Dénomination de la collectivité ciblée
		output:
			result: 
				comment: ok - si la suppresion s'est bien déroulée 


	add-role-utilisateur: 
		description: Ajouter un role
		soap: true
		comment: "Permet l'ajout d'un role d'un utilisateur pour une collectivité donnée."
		input: 
			id_u:
                                required: true
				comment: Identifiant de l'utilisateur
			role:
                                required: true
				comment: Role à ajouter
			id_e:
                                required: true
				comment: Identifiant de la collectivité ciblée
		output:
			result: 
				comment: ok - si l'ajout s'est bien déroulée 


	add-several-roles-utilisateur: 
		description: Ajouter plusieurs roles
		soap: true
		comment: |
                Permet l'ajout d'un ou plusieurs roles d'un utilisateur pour une collectivité donnée.
                L'utilisateur peut être choisi par son identifiant ou son login. Si les deux paramètres sont renseignés, son identifiant sera utilisé.
                La collectivité peut être choisie par son identifiant ou sa dénomination. Si les deux paramètres sont renseignés, son identifiant sera utilisé.
                Dans le cas où la dénomination est choisie, si deux entités portent le même nom, aucune action ne sera effectuée.
		input: 
			id_u:
                                required: false
				comment: Identifiant de l'utilisateur
			login:
                                required: false
				comment: Login de l'utilisateur
			role[]:
                                required: true
				comment: Tableau de roles à supprimer. Possibilité de n'envoyer qu'un simple role également.
			id_e:
                                required: false
				comment: Identifiant de la collectivité ciblée
			denomination:
                                required: false
				comment: Dénomination de la collectivité ciblée
			deleteRoles:
                                required: false
                                default: "FALSE"
				comment: Flag permettant la suppression de tous les roles de l'utilisateur avant de lui attribuer les nouveaux

		output:
			result: 
				comment: ok - si l'ajout s'est bien déroulée 


	create-entite: 
		description: Créer une entité
		soap: true
		comment: Permet la création d'une entité.
		input: 
			denomination:
                                required: true
				comment: Dénomination de l'entité
			type:
                                required: true
				comment: Le type de l'entité
			siren:
                                required: true
				comment: Le siren de l'entité
			entite_mere:
                                required: false
                                default: 0
				comment: Identifiant du l'entité mère
			centre_de_gestion:
                                required: false
                                default: 0
				comment: Identifiant du centre de gestion de l'entité
		output:
			id_e: 
				comment: Identifiant de la nouvelle entité 


	delete-entite: 
		description: Supprimer une entité
		soap: true
		comment: |
                Permet la suppression d'une entité soit par son identifiant, soit par sa dénomination. 
                Dans le cas où les deux paramètres sont renseignés, seul l'identifiant sera pris en compte.
                Si deux entités portent le même nom, aucune action ne sera effectuée.
		input: 
			id_e:
                                required: false
				comment: Identifiant de l'entité
			denomination:
                                required: false
				comment: Dénomination de l'entité
		output:
			result: 
				comment: ok - si la suppresion s'est bien déroulée 


	modif-entite: 
		description: Modifier une entité
		soap: true
		comment: |
                Permet la modification d'une entité soit par son identifiant, soit par sa dénomination. 
                Dans le cas où les deux paramètres sont renseignés, seul l'identifiant sera pris en compte.
                Si deux entités portent le même nom, aucune action ne sera effectuée.
		input: 
			id_e:
                                required: false
				comment: Identifiant de l'entité
			denomination:
                                required: false
				comment: Dénomination de l'entité
			type:
                                required: false
				comment: Le type de l'entité
			siren:
                                required: false
				comment: Le siren de l'entité
			entite_mere:
                                required: false
                                default: 0
				comment: Identifiant du l'entité mère
			centre_de_gestion:
                                required: false
                                default: 0
				comment: Identifiant du centre de gestion de l'entité
			create:
                                required: false
                                default: "FALSE"
				comment: Flag permettant la création de l'entité si aucune autre entité ne porte le même nom.
		output:
			result: 
				comment: ok - si la suppresion s'est bien déroulée 


	list-extension:
		description: Liste les extensions de la plateforme
		soap: false
		comment: Permet de lister les extensions ainsi que toutes les informations (connecteur, flux, ...)
		output:
			result:
				comment: tableau contenant la liste des extensions avec l'id de l'extension comme clé et les informations sur l'extension

	edit-extension:
		description: Ajout ou modification du chemin d'une extension
		soap: false
		input:
			id_extension:
				required: false
				comment: Identifiant de l'extension à modifier, 0 ou rien pour créer une extension
			path:
				required: true
				comment: Emplacement de l'extension sur le système de fichier
		output:
			result:
				comment: ok si l'ajout ou la modification s'est bien déroulé

	delete-extension:
		description: Supression  d'une extension
		soap: false
		input:
			id_extension:
				required: true
				comment: Identifiant de l'extension à supprimer
		output:
			result:
				comment: ok si la supression s'est bien déroulé
