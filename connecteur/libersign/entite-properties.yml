nom: Libersign
type: signature

description: |
	Connecteur permettant d'inclure l'applet de signature Libersign dans un type de dossier Pastell
	Ce connecteur est compatible avec Libersign V2

formulaire:
	page0:
		libersign_applet_url: 
			name: "URL de l'applet"
			commentaire: "Exemple : https://pastell.libriciel.fr/libersign/"
		libersign_extension_update_url:
			name: "URL de l'extension Libersign V2"
			commentaire: "Exemple : https://pastell.libriciel.fr/libersign/"
		libersign_help_url:
			name: "URL de la page d'aide permettant l'installation de Libersign V2"
			commentaire: "Exemple : https://pastell.libriciel.fr/libersign/help/"
		libersign_city:
			name: "Ville"
			commentaire: "Nécessaire, pour être introduite dans la signature des fichier PES"
		libersign_cp:
			name: "Code postal"
			commentaire: "Nécessaire, pour être introduite dans la signature des fichier PES"
		libersign_xmlstarlet_path:
			name: xmlstarlet
			commentaire: "Emplacement de l'executable xmlstarlet (défaut : /usr/bin/xmlstarlet)"
		libersign_crypto_url:
			name: URL vers le service crypto
			commentaire: "Exemple : http://crypto:8080 ou http://127.0.0.1:8030"
		libersign_signature_type:
			name: Type de signature
			commentaire: |
				Xades pour Hélios générique/automatique <br />
				Cades pour actes générique/automatique <br />
				Le choix sera respecté pour les flux studio et l'action de test
			type: select
			value:
				CADES: Cades
				XADES: Xades
			default: CADES
		libersign_test_document:
			name: Document de test à signer
			type: file
		libersign_test_document_result:
			name: Résultat de la signature du document
			type: file
			read-only: true
		libersign_test:
			name: Tester Libersign V2
			commentaire: Il n'y a pas de bouton permettant de déclencher une action externalData...
			link_name: Tester Libersign V2
			type: externalData
			choice-action: test-libersign
			no-show: true

action:
	test-sha1:
		name: Tester la création d'une empreinte d'un fichier PES
		action-class: LibersignTestSHA1
		rule:
			droit_id_u: 'entite:edition'
	test-libersign:
		name: Test libersign
		rule:
			role_id_e: no-role
		action-class: LibersignTestV2
	test-libersign-button:
		name: Tester Libersign
		action-class: LibersignTestButton


