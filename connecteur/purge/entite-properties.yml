nom: Purge

description: |
  Permet la purge de document Pastell automatiquement


type: Purge

formulaire:
    Purge:
        actif:
            name: Connecteur actif
            type: checkbox

        document_type_libelle:
            name: Type de document
            type: externalData
            choice-action: type_document
            link_name: Sélectionner le type de document

        document_type:
            no-show: true

        document_etat_libelle:
            name: Etat source du document
            type: externalData
            choice-action: document_etat
            link_name: Sélectionner l'état source du document

        document_etat:
            no-show: true

        passer_par_l_etat:
            name: Type de sélection
            type: select
            value:
                IN_STATE: Documents qui sont dans l'état source
                GO_TROUGH_STATE: Documents qui sont passés par l'état source
            commentaire: Par défaut, les documents qui sont dans l'état source


        document_etat_cible_libelle:
            name: Action sur le document
            type: externalData
            choice-action: document_etat_cible
            link_name: Sélectionner l'action à programmer sur le document
            commentaire: Supprimer par défaut

        document_etat_cible:
            no-show: true

        nb_days:
            name: Nombre de jour minimum passés dans l'état source



action:
    test:
        name: Lister les documents à purger
        action-class: PurgeListDocument

    purge:
        name: Purger
        action-class: PurgePurger
        action-automatique: purge

    purge-async:
        name: Purger (asynchrone)
        action-class: PurgePurgerAsync

    type_document:
        rule:
            role_id_e: no-role
        action-class: PurgeTypeDocument

    document_etat:
        rule:
            role_id_e: no-role
        action-class: PurgeDocumentEtat

    document_etat_cible:
        rule:
            role_id_e: no-role
        action-class: PurgeDocumentEtatCible
